<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">

<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta http-equiv="Cache-Control" content="no-cache" />
    <meta name="viewport" content="width=device-width,initial-scale=1.0,minimum-scale=1.0, maximum-scale=2.0" />
    <meta name="MobileOptimized" content="240" />
    <title>康师傅泡椒系列的微博</title>
    <script src="./shake.js"></script>
</head>

<body>
    html5手机摇一摇功能，摇一摇试试看
    <audio style="display:hide" id="musicBox" preload="metadata" controls autoplay="true" src="weixin_yaoyiyao.mp3" controls="controls"></audio>

    <div id="content">
        <p>微信内部需要初始化 <audio> 播放</p>
	</div>

    <script type="text/javascript">
        var media = document.getElementById("musicBox");
        var container = document.getElementById("content");

        (function() {
            var time = 0;
            shake.init(function() {
                if (!media.src) {
                    media.src = "weixin_yaoyiyao.mp3"
                }
                media.play();

                var node = document.createElement("LI");
                node.innerHTML = ++time;
                container.appendChild(node);
            });

            shake.disabled = false;
        })();
    </script>
</body>

</html>